<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø±ÙˆØ²Ø´Ù…Ø§Ø± Ø®Ø¯Ù…Øª Ø³Ø±Ø¨Ø§Ø²ÛŒ</title>

 <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">

<style>
body{
    font-family:tahoma;
    background:linear-gradient(135deg,#1a2a6c,#b21f1f,#fdbb2d);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
}
.container{
    background:#fff;
    width:100%;
    max-width:420px;
    padding:20px;
    border-radius:15px;
    box-shadow:0 10px 25px rgba(0,0,0,.2);
}
h1{
    text-align:center;
    color:#1a2a6c;
    margin-bottom:20px;
}
label{
    display:block;
    margin:10px 0 5px;
    font-weight:bold;
}
input,select{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid #ccc;
}
button{
    width:100%;
    padding:12px;
    margin-top:15px;
    background:#1a2a6c;
    color:#fff;
    border:none;
    border-radius:8px;
    font-size:16px;
    cursor:pointer;
}
.result{
    margin-top:20px;
    display:none;
}
.progress{
    background:#eee;
    border-radius:10px;
    overflow:hidden;
    margin-top:10px;
}
.progress-bar{
    height:16px;
    background:#1a2a6c;
    width:0%;
}
.small{
    font-size:13px;
    color:#666;
    text-align:center;
    margin-top:10px;
}
</style>
</head>

<body>
<div class="container">
<h1>Ø±ÙˆØ²Ø´Ù…Ø§Ø± Ø®Ø¯Ù…Øª</h1>

<label>ØªØ§Ø±ÛŒØ® Ø§Ø¹Ø²Ø§Ù…</label>
<input type="text" id="startDate" readonly>

<label>Ù…Ø¯Øª Ø®Ø¯Ù…Øª</label>
<select id="months">
<option value="21">Û²Û± Ù…Ø§Ù‡</option>
<option value="24">Û²Û´ Ù…Ø§Ù‡</option>
</select>

<label>Ú©Ø³Ø±ÛŒ Ø®Ø¯Ù…Øª (Ø±ÙˆØ²)</label>
<input type="number" id="kasri" value="0">

<button onclick="calc()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>

<div class="result" id="result">
<hr>
<p>ğŸ“… ØªØ§Ø±ÛŒØ® Ø§Ù…Ø±ÙˆØ²: <span id="today"></span></p>
<p>ğŸ ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†: <span id="endDate"></span></p>
<p>â³ Ø±ÙˆØ² Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: <span id="remain"></span></p>
<p>ğŸ“Š Ø¯Ø±ØµØ¯ Ù¾ÛŒØ´Ø±ÙØª: <span id="percent"></span>%</p>

<div class="progress">
<div class="progress-bar" id="bar"></div>
</div>
</div>

<p class="small">Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ Ø¨Ø±Ø§ÛŒ Ø³Ø±Ø¨Ø§Ø²Ù‡Ø§</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/persian-date@1.0.6/dist/persian-date.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/js/persian-datepicker.min.js"></script>

<script>
$("#startDate").persianDatepicker({
    format: 'YYYY/MM/DD',
    initialValueType: 'persian',
    autoClose:true,
    maxDate: 1420/12/29
});

function calc(){
    let start = $("#startDate").val();
    if(!start){ alert("ØªØ§Ø±ÛŒØ® Ø§Ø¹Ø²Ø§Ù… Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†"); return; }

    let months = parseInt(document.getElementById("months").value);
    let kasri = parseInt(document.getElementById("kasri").value || 0);

    let startDate = new persianDate(start).toDate();
    let totalDays = months * 30 - kasri;

    let endDate = new Date(startDate);
    endDate.setDate(endDate.getDate() + totalDays);

    let today = new Date();
    let remain = Math.ceil((endDate - today) / (1000*60*60*24));
    if(remain < 0) remain = 0;

    let passed = totalDays - remain;
    let percent = Math.round((passed / totalDays) * 100);

    document.getElementById("today").innerText =
        new persianDate(today).format("YYYY/MM/DD");
    document.getElementById("endDate").innerText =
        new persianDate(endDate).format("YYYY/MM/DD");
    document.getElementById("remain").innerText = remain + " Ø±ÙˆØ²";
    document.getElementById("percent").innerText = percent;

    document.getElementById("bar").style.width = percent + "%";
    document.getElementById("result").style.display="block";
}
</script>
</body>
</html>